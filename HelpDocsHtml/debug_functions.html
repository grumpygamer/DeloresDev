<html><head><link rel='stylesheet' href='../HelpDocs/help.css'><link href='https://fonts.googleapis.com/css?family=Roboto:300|Ubuntu:300' rel='stylesheet'></head><body><span class='button'><a href='home.html'>Home</a></span><span class='button'><a href='index.html'>Index</a></span><html><head><link rel='stylesheet' href='help.css'></head><body><h1>Debug Functions</h1><div class='section text'><div class='line_break'></div> </div><div class='function_list'><div id='2' class='function'>trace(state)<div class='desc'>Turns on or off the tracing of source code.</div><div class='function text'></div></div><div id='3' class='function'>startglobalthread/startthread([this_table, ]function, [param, ... ])<div class='desc'>Starts a new thread using <span class='inline_code'>function</span> and passing the <span class='inline_code'>params</span></div><div class='function text'><span class='inline_code'>startthread</span> returns a unique thread id that can be used to monitor or kill the thread. <div class='code_block'><span class='keyword'>startthread</span>(watchLight, Office.light)
tid = <span class='keyword'>startthread</span>(controlBear)
<span class='keyword'>stopthread</span>(tid)
</div>Note that when starting a thread, you pass the name of the function and don't call the function. <div class='code_block'><span class='keyword'>startthread</span>(watchLight(), Office.light)
</div>This will call the function on the current thread and then probably throw an error. <div class='line_break'></div> If <span class='inline_code'>this_table</span> is passed, it becomes the <span class='inline_code'>this</span> for the function. This is needed for when threads are started from detached functions that need to be part of a table. <div class='line_break'></div> If the <span class='inline_code'>startthread(...)</span> form is used, the thread will be killed when leaving the current room </div></div><div id='4' class='function'>stopthread(thread_id)<div class='desc'>Stops a thread based on a unique thread id.</div><div class='function text'><div class='code_block'>tid = <span class='keyword'>startthread</span>(controlBear)
<span class='keyword'>stopthread</span>(tid)
</div></div></div><div id='5' class='function'>threadrunning(thread_id)<div class='desc'>Returns <span class='inline_code'>true</span> if the thread is running.</div><div class='function text'><div class='code_block'>tid = <span class='keyword'>startthread</span>(controlBear)
<span class='keyword'>if</span> (<span class='keyword'>threadrunning</span>(tid)) { <span class='keyword'>print</span>(<span class='string'>"running"</span>) } <span class='keyword'>else</span> { <span class='keyword'>print</span>(<span class='string'>"stopped"</span>) }
</div></div></div><div id='6' class='function'>threadid()<div class='desc'>Returns the unique thread id of the currently running thread.</div><div class='function text'></div></div><div id='7' class='function'>threadpause(thread_id, state)<div class='desc'>Pauses or unpauses a thread based on 'state'.</div><div class='function text'><div class='code_block'><span class='keyword'>threadpause</span>(watch_tid, <span class='keyword'>true</span>)
</div></div></div><div id='8' class='function'>threadpauseglobal(state)<div class='desc'>Pauses or unpauses all global threads</div><div class='function text'><div class='code_block'>threadpauseglobal(<span class='keyword'>true</span>)
</div>Also returns the number of threads acted upon. </div></div><div id='9' class='function'>threadpausable(thread_id, state)<div class='desc'>Marks a thread as pausable to unpausebale based on <span class='inline_code'>state</span></div><div class='function text'>This is mainly used so when a cutscene pauses threads, some can be immune. </div></div><div id='10' class='function'>breakhere(frames=1)<div class='desc'>Breaks (or yelds) a thread until the next frame.</div><div class='function text'><div class='code_block'><span class='keyword'>breakhere</span>()  <span class='comment'>// Breaks <span class='keyword'>for</span> 1 frame</span>
<span class='keyword'>breakhere</span>(5) <span class='comment'>// Breaks <span class='keyword'>for</span> 5 frames.</span>
</div>Only threads started with <span class='inline_code'>startthread()</span> can have break commands, otherwise an error is thrown. </div></div><div id='11' class='function'>breaktime(duration) | breaktime(from,to)<div class='desc'>Breaks (or yelds) a thread for <span class='inline_code'>duration</span> seconds.</div><div class='function text'><div class='code_block'><span class='keyword'>breaktime</span>(10.0)     <span class='comment'>// Breaks <span class='keyword'>for</span> 10 seconds</span>
<span class='keyword'>breaktime</span>(2.0,5.0)  <span class='comment'>// Breaks randomly <span class='keyword'>for</span> `2.0` to `5.0` seconds.</span>
</div>Doing a <span class='inline_code'>breaktime(0.0)</span> will cause the thread to break for 1 frame. </div></div><div id='12' class='function'>breakwhilerunning(thread_id)<div class='desc'>Breaks while the thread with <span class='inline_code'>thread_id</span> is running.</div><div class='function text'><div class='code_block'><span class='keyword'>breakwhilerunning</span>(bear_attacks_tid)
<span class='keyword'>print</span>(<span class='string'>"I think I'm dead"</span>)
</div></div></div><div id='13' class='function'>loglevel(level)<div class='desc'>Sets the current logging output level.</div><div class='function text'></div></div><div id='14' class='function'>printlog(level, value, [value, ...])<div class='desc'>Prints to the debug console at a log level of <span class='inline_code'>level</span></div><div class='function text'>If the <span class='inline_code'>loglevel()</span> is below <span class='inline_code'>level</span> then nothing will print. </div></div><div id='15' class='function'>addconsolebutton(color, title, command)<div class='desc'>Adds a button to the debug console to execute a command when pressed</div><div class='function text'><div class='code_block'>addconsolebutton(0x00FF00, <span class='string'>"Player"</span>, <span class='string'>"watch player"</span>)
addconsolebutton(0xFF0000, <span class='string'>"Trace"</span>, <span class='string'>"trace"</span>)
addconsolebutton(0x0040FF, <span class='string'>"Threads"</span>, <span class='string'>"show threads"</span>)
</div></div></div><div id='17' class='function'>watchvar(var)<div class='desc'>Opens up a debug window that live-watches the variable allowing values to be changed.</div><div class='function text'></div></div><div id='8' class='function'>dumpstack()<div class='desc'>Dumps the call stack to the debug console</div><div class='function text'>This also happens when an error is thrown. </div></div><div id='9' class='function'>dumpvar()<div class='desc'>Dumps a variable to the debug console</div><div class='function text'></div></div></div><p class='copyright'>Copyright 2020 Terrible Toybox, Inc. All Rights Reserved.</p></body></html>