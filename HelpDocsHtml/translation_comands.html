<html><head><link rel='stylesheet' href='../HelpDocs/help.css'><link href='https://fonts.googleapis.com/css?family=Roboto:300|Ubuntu:300' rel='stylesheet'></head><body><span class='button'><a href='home.html'>Home</a></span><span class='button'><a href='index.html'>Index</a></span><html><head><link rel='stylesheet' href='help.css'></head><body><h1>Translation Commands</h1><div class='section text'><div class='line_break'></div> The translation code was never fully finished for Delores and was hastily added right before releasing this source.  Apologies if there are rough edges. <div class='line_break'></div> All text that needs to be translated should be wrapped with the <span class='inline_code'>SAY(0,"Hi there!")</span> or <span class='inline_code'>TEXT(0,"cardboard box")</span> macros depending on if the text is said by a character or just displayed on the verbs or UI. <div class='code_block'>sayLine(delores, <span class='string'>"The commodore 64 is my favorite computer."</span>)
</div>Becomes <div class='code_block'>sayLine(delores, SAY(11876,<span class='string'>"The commodore 64 is my favorite computer."</span>))
</div>This is best done by wrapping all text and leaving the id as <span class='inline_code'>0</span>, then creating a python script that goes through and finds all <span class='inline_code'>SAY(0,"...")</span> assigning a unique number and saves them to a <span class='inline_code'>.tsv</span> file.  The ids must start at <span class='inline_code'>11000</span>. <div class='line_break'></div> The <span class='inline_code'>.tsv</span> file has four columns:: <div class='code_block'>id text en loc
</div>Note that is a <span class='inline_code'>.tsv</span> (Tab Separated Values) file, not a <span class='inline_code'>.csv</span> (Comma Separated Values) file. <div class='line_break'></div> It's best if this python script is stable and can be run multiple times as you add new text without renumbering the text ids. <div class='line_break'></div> Switching languages can be done by adding an option in <span class='inline_code'>Options.dinky</span> and using that to load different Translation files. <div class='line_break'></div> Most of the fonts in Delores don't include much more than ASCII glyphs. You can supply your own TTF fonts with the characters you need or you can use <span class='inline_code'>http://www.pentacom.jp/pentacom/bitfontmaker2/</span> to upload and modify The included fonts. <div class='line_break'></div> If you want your translations to be compatible with other mods, or even make it back into the release game, don't renumber the line ids and make alterations only in the 'text' labeled column of the <span class='inline_code'>.tsv</span> file. <div class='line_break'></div> When working on a translation in the <span class='inline_code'>.tsv</span> file, resist the urge to fix typos in the English text (the native text in the 3rd column of the <span class='inline_code'>.tsv</span> file, labeled 'en').  These changes should be made in the source (<span class='inline_code'>.dinky</span> file) and then a new/updated extraction should be done.   This is because the English text comes from <span class='inline_code'>Translations_en.tsv</span> and not the 'en' labeled column from (for example) <span class='inline_code'>Translations_de.tsv</span>, from which the player will never see the edits. <div class='line_break'></div> The 'en' labeled column, 3rd column of the <span class='inline_code'>.tsv</span> file, is for text reference only. <div class='line_break'></div> If you're going to add new lines, number them from 20000 and up so they don't conflict with the existing lines from the core game. <div class='line_break'></div> Have fun! </div><div class='function_list'><div id='2' class='function'>useTranslation(language)<div class='desc'>Change languages</div><div class='function text'>This is called with a 2-letter language code: <span class='inline_code'>en</span>, <span class='inline_code'>de</span>, <span class='inline_code'>fr</span>, <span class='inline_code'>it</span>, etc. Technically they don't have to be 2-letter codes but for for consistency they should be when possible. You could create <span class='inline_code'>piglatin</span> files if you wanted. <div class='line_break'></div> There is a special text id of <span class='inline_code'>10000</span> that should be used to hold the text of your language in your language. <div class='code_block'>English    English
</div>or <div class='code_block'>Deutsch    German
</div>The id <span class='inline_code'>10001</span> should be used to provide a short description of the translation for display in the UI. This can be useful in distinguishing between two translation in the same language. <div class='code_block'>Traduction par Google    Translation by Google
</div>Text id's <span class='inline_code'>10000</span>-<span class='inline_code'>11000</span> should not be used as they are reserved for the system and engine. <div class='line_break'></div> If you switch languages in the middle of playing, any text already on the screen will not change until it needs to be redrawn. <div class='line_break'></div> Passing <span class='inline_code'>null</span> will turn off all translation and use the text in the source code. </div></div><div id='3' class='function'>TR(text)<div class='desc'>Translates a raw line of text</div><div class='function text'>The text must have line ids in it to be translated.  Line ids are a five digit number follow by a <span class='inline_code'>:</span> and then the original (English in this case) text. <div class='line_break'></div> After the macro expands, the code <span class='inline_code'>sayLine(SAY(11879,"I love making games! Do you?"))</span> emits <span class='inline_code'>sayLine("11879:I love making games! Do you?")</span> <div class='line_break'></div> A marker of <span class='inline_code'>0</span> mean the text has not been extracted to the <span class='inline_code'>.tsv</span> file yet. <div class='line_break'></div> Text that begins with a <span class='inline_code'>^</span> won't be translated. <div class='line_break'></div> Turning on <span class='inline_code'>Translation Markers</span> in the Options panel will produce good information for debugging. </div></div></div><p class='copyright'>Copyright 2020 Terrible Toybox, Inc. All Rights Reserved.</p></body></html>
